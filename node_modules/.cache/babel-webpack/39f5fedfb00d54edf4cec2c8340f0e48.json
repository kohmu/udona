{"ast":null,"code":"// ext-unpacker.js\nexports.setExtUnpackers = setExtUnpackers;\n\nvar Bufferish = require(\"./bufferish\");\n\nvar Buffer = Bufferish.global;\n\nvar _decode;\n\nvar ERROR_COLUMNS = {\n  name: 1,\n  message: 1,\n  stack: 1,\n  columnNumber: 1,\n  fileName: 1,\n  lineNumber: 1\n};\n\nfunction setExtUnpackers(codec) {\n  codec.addExtUnpacker(0x0E, [decode, unpackError(Error)]);\n  codec.addExtUnpacker(0x01, [decode, unpackError(EvalError)]);\n  codec.addExtUnpacker(0x02, [decode, unpackError(RangeError)]);\n  codec.addExtUnpacker(0x03, [decode, unpackError(ReferenceError)]);\n  codec.addExtUnpacker(0x04, [decode, unpackError(SyntaxError)]);\n  codec.addExtUnpacker(0x05, [decode, unpackError(TypeError)]);\n  codec.addExtUnpacker(0x06, [decode, unpackError(URIError)]);\n  codec.addExtUnpacker(0x0A, [decode, unpackRegExp]);\n  codec.addExtUnpacker(0x0B, [decode, unpackClass(Boolean)]);\n  codec.addExtUnpacker(0x0C, [decode, unpackClass(String)]);\n  codec.addExtUnpacker(0x0D, [decode, unpackClass(Date)]);\n  codec.addExtUnpacker(0x0F, [decode, unpackClass(Number)]);\n\n  if (\"undefined\" !== typeof Uint8Array) {\n    codec.addExtUnpacker(0x11, unpackClass(Int8Array));\n    codec.addExtUnpacker(0x12, unpackClass(Uint8Array));\n    codec.addExtUnpacker(0x13, [unpackArrayBuffer, unpackClass(Int16Array)]);\n    codec.addExtUnpacker(0x14, [unpackArrayBuffer, unpackClass(Uint16Array)]);\n    codec.addExtUnpacker(0x15, [unpackArrayBuffer, unpackClass(Int32Array)]);\n    codec.addExtUnpacker(0x16, [unpackArrayBuffer, unpackClass(Uint32Array)]);\n    codec.addExtUnpacker(0x17, [unpackArrayBuffer, unpackClass(Float32Array)]); // PhantomJS/1.9.7 doesn't have Float64Array\n\n    if (\"undefined\" !== typeof Float64Array) {\n      codec.addExtUnpacker(0x18, [unpackArrayBuffer, unpackClass(Float64Array)]);\n    } // IE10 doesn't have Uint8ClampedArray\n\n\n    if (\"undefined\" !== typeof Uint8ClampedArray) {\n      codec.addExtUnpacker(0x19, unpackClass(Uint8ClampedArray));\n    }\n\n    codec.addExtUnpacker(0x1A, unpackArrayBuffer);\n    codec.addExtUnpacker(0x1D, [unpackArrayBuffer, unpackClass(DataView)]);\n  }\n\n  if (Bufferish.hasBuffer) {\n    codec.addExtUnpacker(0x1B, unpackClass(Buffer));\n  }\n}\n\nfunction decode(input) {\n  if (!_decode) _decode = require(\"./decode\").decode; // lazy load\n\n  return _decode(input);\n}\n\nfunction unpackRegExp(value) {\n  return RegExp.apply(null, value);\n}\n\nfunction unpackError(Class) {\n  return function (value) {\n    var out = new Class();\n\n    for (var key in ERROR_COLUMNS) {\n      out[key] = value[key];\n    }\n\n    return out;\n  };\n}\n\nfunction unpackClass(Class) {\n  return function (value) {\n    return new Class(value);\n  };\n}\n\nfunction unpackArrayBuffer(value) {\n  return new Uint8Array(value).buffer;\n}","map":{"version":3,"sources":["C:/Users/kohmu/udonarium/node_modules/msgpack-lite/lib/ext-unpacker.js"],"names":["exports","setExtUnpackers","Bufferish","require","Buffer","global","_decode","ERROR_COLUMNS","name","message","stack","columnNumber","fileName","lineNumber","codec","addExtUnpacker","decode","unpackError","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","unpackRegExp","unpackClass","Boolean","String","Date","Number","Uint8Array","Int8Array","unpackArrayBuffer","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Uint8ClampedArray","DataView","hasBuffer","input","value","RegExp","apply","Class","out","key","buffer"],"mappings":"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","sourcesContent":["// ext-unpacker.js\n\nexports.setExtUnpackers = setExtUnpackers;\n\nvar Bufferish = require(\"./bufferish\");\nvar Buffer = Bufferish.global;\nvar _decode;\n\nvar ERROR_COLUMNS = {name: 1, message: 1, stack: 1, columnNumber: 1, fileName: 1, lineNumber: 1};\n\nfunction setExtUnpackers(codec) {\n  codec.addExtUnpacker(0x0E, [decode, unpackError(Error)]);\n  codec.addExtUnpacker(0x01, [decode, unpackError(EvalError)]);\n  codec.addExtUnpacker(0x02, [decode, unpackError(RangeError)]);\n  codec.addExtUnpacker(0x03, [decode, unpackError(ReferenceError)]);\n  codec.addExtUnpacker(0x04, [decode, unpackError(SyntaxError)]);\n  codec.addExtUnpacker(0x05, [decode, unpackError(TypeError)]);\n  codec.addExtUnpacker(0x06, [decode, unpackError(URIError)]);\n\n  codec.addExtUnpacker(0x0A, [decode, unpackRegExp]);\n  codec.addExtUnpacker(0x0B, [decode, unpackClass(Boolean)]);\n  codec.addExtUnpacker(0x0C, [decode, unpackClass(String)]);\n  codec.addExtUnpacker(0x0D, [decode, unpackClass(Date)]);\n  codec.addExtUnpacker(0x0F, [decode, unpackClass(Number)]);\n\n  if (\"undefined\" !== typeof Uint8Array) {\n    codec.addExtUnpacker(0x11, unpackClass(Int8Array));\n    codec.addExtUnpacker(0x12, unpackClass(Uint8Array));\n    codec.addExtUnpacker(0x13, [unpackArrayBuffer, unpackClass(Int16Array)]);\n    codec.addExtUnpacker(0x14, [unpackArrayBuffer, unpackClass(Uint16Array)]);\n    codec.addExtUnpacker(0x15, [unpackArrayBuffer, unpackClass(Int32Array)]);\n    codec.addExtUnpacker(0x16, [unpackArrayBuffer, unpackClass(Uint32Array)]);\n    codec.addExtUnpacker(0x17, [unpackArrayBuffer, unpackClass(Float32Array)]);\n\n    // PhantomJS/1.9.7 doesn't have Float64Array\n    if (\"undefined\" !== typeof Float64Array) {\n      codec.addExtUnpacker(0x18, [unpackArrayBuffer, unpackClass(Float64Array)]);\n    }\n\n    // IE10 doesn't have Uint8ClampedArray\n    if (\"undefined\" !== typeof Uint8ClampedArray) {\n      codec.addExtUnpacker(0x19, unpackClass(Uint8ClampedArray));\n    }\n\n    codec.addExtUnpacker(0x1A, unpackArrayBuffer);\n    codec.addExtUnpacker(0x1D, [unpackArrayBuffer, unpackClass(DataView)]);\n  }\n\n  if (Bufferish.hasBuffer) {\n    codec.addExtUnpacker(0x1B, unpackClass(Buffer));\n  }\n}\n\nfunction decode(input) {\n  if (!_decode) _decode = require(\"./decode\").decode; // lazy load\n  return _decode(input);\n}\n\nfunction unpackRegExp(value) {\n  return RegExp.apply(null, value);\n}\n\nfunction unpackError(Class) {\n  return function(value) {\n    var out = new Class();\n    for (var key in ERROR_COLUMNS) {\n      out[key] = value[key];\n    }\n    return out;\n  };\n}\n\nfunction unpackClass(Class) {\n  return function(value) {\n    return new Class(value);\n  };\n}\n\nfunction unpackArrayBuffer(value) {\n  return (new Uint8Array(value)).buffer;\n}\n"]},"metadata":{},"sourceType":"script"}