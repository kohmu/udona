{"ast":null,"code":"// ext-packer.js\nexports.setExtPackers = setExtPackers;\n\nvar Bufferish = require(\"./bufferish\");\n\nvar Buffer = Bufferish.global;\nvar packTypedArray = Bufferish.Uint8Array.from;\n\nvar _encode;\n\nvar ERROR_COLUMNS = {\n  name: 1,\n  message: 1,\n  stack: 1,\n  columnNumber: 1,\n  fileName: 1,\n  lineNumber: 1\n};\n\nfunction setExtPackers(codec) {\n  codec.addExtPacker(0x0E, Error, [packError, encode]);\n  codec.addExtPacker(0x01, EvalError, [packError, encode]);\n  codec.addExtPacker(0x02, RangeError, [packError, encode]);\n  codec.addExtPacker(0x03, ReferenceError, [packError, encode]);\n  codec.addExtPacker(0x04, SyntaxError, [packError, encode]);\n  codec.addExtPacker(0x05, TypeError, [packError, encode]);\n  codec.addExtPacker(0x06, URIError, [packError, encode]);\n  codec.addExtPacker(0x0A, RegExp, [packRegExp, encode]);\n  codec.addExtPacker(0x0B, Boolean, [packValueOf, encode]);\n  codec.addExtPacker(0x0C, String, [packValueOf, encode]);\n  codec.addExtPacker(0x0D, Date, [Number, encode]);\n  codec.addExtPacker(0x0F, Number, [packValueOf, encode]);\n\n  if (\"undefined\" !== typeof Uint8Array) {\n    codec.addExtPacker(0x11, Int8Array, packTypedArray);\n    codec.addExtPacker(0x12, Uint8Array, packTypedArray);\n    codec.addExtPacker(0x13, Int16Array, packTypedArray);\n    codec.addExtPacker(0x14, Uint16Array, packTypedArray);\n    codec.addExtPacker(0x15, Int32Array, packTypedArray);\n    codec.addExtPacker(0x16, Uint32Array, packTypedArray);\n    codec.addExtPacker(0x17, Float32Array, packTypedArray); // PhantomJS/1.9.7 doesn't have Float64Array\n\n    if (\"undefined\" !== typeof Float64Array) {\n      codec.addExtPacker(0x18, Float64Array, packTypedArray);\n    } // IE10 doesn't have Uint8ClampedArray\n\n\n    if (\"undefined\" !== typeof Uint8ClampedArray) {\n      codec.addExtPacker(0x19, Uint8ClampedArray, packTypedArray);\n    }\n\n    codec.addExtPacker(0x1A, ArrayBuffer, packTypedArray);\n    codec.addExtPacker(0x1D, DataView, packTypedArray);\n  }\n\n  if (Bufferish.hasBuffer) {\n    codec.addExtPacker(0x1B, Buffer, Bufferish.from);\n  }\n}\n\nfunction encode(input) {\n  if (!_encode) _encode = require(\"./encode\").encode; // lazy load\n\n  return _encode(input);\n}\n\nfunction packValueOf(value) {\n  return value.valueOf();\n}\n\nfunction packRegExp(value) {\n  value = RegExp.prototype.toString.call(value).split(\"/\");\n  value.shift();\n  var out = [value.pop()];\n  out.unshift(value.join(\"/\"));\n  return out;\n}\n\nfunction packError(value) {\n  var out = {};\n\n  for (var key in ERROR_COLUMNS) {\n    out[key] = value[key];\n  }\n\n  return out;\n}","map":{"version":3,"sources":["C:/Users/kohmu/udonarium/node_modules/msgpack-lite/lib/ext-packer.js"],"names":["exports","setExtPackers","Bufferish","require","Buffer","global","packTypedArray","Uint8Array","from","_encode","ERROR_COLUMNS","name","message","stack","columnNumber","fileName","lineNumber","codec","addExtPacker","Error","packError","encode","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","RegExp","packRegExp","Boolean","packValueOf","String","Date","Number","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Uint8ClampedArray","ArrayBuffer","DataView","hasBuffer","input","value","valueOf","prototype","toString","call","split","shift","out","pop","unshift","join","key"],"mappings":"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","sourcesContent":["// ext-packer.js\n\nexports.setExtPackers = setExtPackers;\n\nvar Bufferish = require(\"./bufferish\");\nvar Buffer = Bufferish.global;\nvar packTypedArray = Bufferish.Uint8Array.from;\nvar _encode;\n\nvar ERROR_COLUMNS = {name: 1, message: 1, stack: 1, columnNumber: 1, fileName: 1, lineNumber: 1};\n\nfunction setExtPackers(codec) {\n  codec.addExtPacker(0x0E, Error, [packError, encode]);\n  codec.addExtPacker(0x01, EvalError, [packError, encode]);\n  codec.addExtPacker(0x02, RangeError, [packError, encode]);\n  codec.addExtPacker(0x03, ReferenceError, [packError, encode]);\n  codec.addExtPacker(0x04, SyntaxError, [packError, encode]);\n  codec.addExtPacker(0x05, TypeError, [packError, encode]);\n  codec.addExtPacker(0x06, URIError, [packError, encode]);\n\n  codec.addExtPacker(0x0A, RegExp, [packRegExp, encode]);\n  codec.addExtPacker(0x0B, Boolean, [packValueOf, encode]);\n  codec.addExtPacker(0x0C, String, [packValueOf, encode]);\n  codec.addExtPacker(0x0D, Date, [Number, encode]);\n  codec.addExtPacker(0x0F, Number, [packValueOf, encode]);\n\n  if (\"undefined\" !== typeof Uint8Array) {\n    codec.addExtPacker(0x11, Int8Array, packTypedArray);\n    codec.addExtPacker(0x12, Uint8Array, packTypedArray);\n    codec.addExtPacker(0x13, Int16Array, packTypedArray);\n    codec.addExtPacker(0x14, Uint16Array, packTypedArray);\n    codec.addExtPacker(0x15, Int32Array, packTypedArray);\n    codec.addExtPacker(0x16, Uint32Array, packTypedArray);\n    codec.addExtPacker(0x17, Float32Array, packTypedArray);\n\n    // PhantomJS/1.9.7 doesn't have Float64Array\n    if (\"undefined\" !== typeof Float64Array) {\n      codec.addExtPacker(0x18, Float64Array, packTypedArray);\n    }\n\n    // IE10 doesn't have Uint8ClampedArray\n    if (\"undefined\" !== typeof Uint8ClampedArray) {\n      codec.addExtPacker(0x19, Uint8ClampedArray, packTypedArray);\n    }\n\n    codec.addExtPacker(0x1A, ArrayBuffer, packTypedArray);\n    codec.addExtPacker(0x1D, DataView, packTypedArray);\n  }\n\n  if (Bufferish.hasBuffer) {\n    codec.addExtPacker(0x1B, Buffer, Bufferish.from);\n  }\n}\n\nfunction encode(input) {\n  if (!_encode) _encode = require(\"./encode\").encode; // lazy load\n  return _encode(input);\n}\n\nfunction packValueOf(value) {\n  return (value).valueOf();\n}\n\nfunction packRegExp(value) {\n  value = RegExp.prototype.toString.call(value).split(\"/\");\n  value.shift();\n  var out = [value.pop()];\n  out.unshift(value.join(\"/\"));\n  return out;\n}\n\nfunction packError(value) {\n  var out = {};\n  for (var key in ERROR_COLUMNS) {\n    out[key] = value[key];\n  }\n  return out;\n}\n"]},"metadata":{},"sourceType":"script"}